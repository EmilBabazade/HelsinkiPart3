{"version":3,"sources":["components/addNewPerson.js","components/listAllPeople.js","components/searchFilter.js","services/persons.js","components/notification.js","components/app.js","index.js"],"names":["AddNew","name","phoneNumber","nameChangeHandler","numberChangeHandler","addPersonHandler","value","onChange","type","onClick","ListAll","persons","deleteHandler","map","person","key","id","number","SearchFilter","filter","filterHandler","baseUrl","getResponseData","request","then","response","data","axios","get","newPerson","post","delete","Notification","message","className","App","useState","setPersons","newName","setNewName","newPhoneNumber","setNewPhoneNumber","filteredPersons","SetFilteredPersons","filterSetter","notification","setNotification","getAllPersons","personsService","initialPersons","useEffect","event","newFilter","target","newFilteredPersons","toLowerCase","startsWith","preventDefault","nameIsInPersons","some","phonenNumberIsInPersons","phoneBookException","userText","originalOwner","reduce","validatePerson","createdPerson","concat","setTimeout","catch","error","errMsg","console","log","alert","Boolean","window","confirm","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d24b60d7.chunk.js","sourcesContent":["import React from 'react'\n\nconst AddNew = ({\n    name, \n    phoneNumber, \n    nameChangeHandler,\n    numberChangeHandler,\n    addPersonHandler\n}) => {\n    return(\n        <div>\n            <form>\n                <div>\n                    <h2>add a new</h2>\n                    name: <input value={ name } onChange={ nameChangeHandler } />\n                    <br/>\n                    number: <input value={ phoneNumber } onChange={ numberChangeHandler } />\n                </div>\n                <div>\n                    <button type=\"submit\" onClick={ addPersonHandler }>add</button>\n                </div>\n            </form>\n        </div>\n    );\n}\n\nexport default AddNew","import React from 'react'\n\nconst ListAll = ({ persons, deleteHandler }) => {\n    return(\n        <div>\n            <h2>Numbers</h2>\n            <ul>\n                { persons.map( person => {\n                    return(\n                        <li key={ person.id + person.name + person.number }>\n                            { person.name } { person.number }\n                            <button onClick={deleteHandler(person)}>delete</button>\n                        </li>\n                    )\n                } ) }\n            </ul>\n        </div>\n    );\n}\n\nexport default ListAll","import React from 'react'\n\nconst SearchFilter = ({filter, filterHandler}) => {\n    return(\n        <div>\n            filter shown with \n            <input \n                value={ filter } \n                onChange={ filterHandler } \n            />\n        </div>\n    );\n}\n\nexport default SearchFilter","import axios from 'axios'\nconst baseUrl = `/api/persons`\n\nconst getResponseData = (request) => {\n    return request.then(response => response.data)\n}\n\nconst getAll = () => {\n    return getResponseData(axios.get(baseUrl))\n}\n\nconst create = (newPerson) => {\n    return getResponseData(axios.post(baseUrl, newPerson))\n}\n\nconst update = (id, newPerson) => {\n    return getResponseData(axios.put(`${baseUrl}/${id}`, newPerson))\n}\n\n// delete is a reserved keyword unfortunately\nconst exterminate = (id) => {\n    return getResponseData(axios.delete(`${baseUrl}/${id}`))\n}\n\nexport default {getAll, create, update, exterminate}","import React from 'react'\n\nconst Notification = ({message}) => {\n    if(message){\n        return(\n            <div className='notification' >\n                {message}\n            </div>\n        )\n    }   \n    return null\n}\n\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport AddNew from './addNewPerson'\nimport ListAll from './listAllPeople'\nimport SearchFilter from './searchFilter'\nimport personsService from '../services/persons'\nimport Notification from './notification'\nimport '../index.css'\n\nconst App = () => {\n  // TODO...?: put these in one object ..?\n  const [ persons, setPersons ] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newPhoneNumber, setNewPhoneNumber ] = useState( 0 )\n  const [ filteredPersons, SetFilteredPersons ] = useState( persons )\n  const [ filter, filterSetter ] = useState( '' )\n  const [ notification, setNotification] = useState('')\n\n  const getAllPersons = () => {\n    personsService\n      .getAll()\n      .then(initialPersons => {\n        setPersons( initialPersons )\n        SetFilteredPersons( initialPersons )\n      })\n  }\n\n  // get all data from db.json\n  useEffect(getAllPersons, [])\n\n  // this is just a helper function\n  const validatePerson = ( newPerson, persons ) => {\n    // check if name or number already exists\n    var nameIsInPersons = persons.some( person => person.name === newPerson.name );\n    var phonenNumberIsInPersons = persons.some( person => person.number === newPerson.number );\n    if( nameIsInPersons ){\n        throw {\n          phoneBookException: true,\n          userText: `${ newPerson.name } is already in phone book`\n        }\n    } else if( phonenNumberIsInPersons ) {\n        var originalOwner = persons.reduce( ( name, person ) => {\n            if( person.number === newPerson.number ) {\n                return person.name\n            } \n            return name\n        }, '' )\n            throw {\n            phoneBookException: true,\n            userText: `Number ${ newPerson.number } belongs to ${ originalOwner }`\n        }\n    }\n  }\n\n  const addPerson = ( event ) => {\n    //not submitting anywhere\n    event.preventDefault()\n    let newPerson = { name: newName, number: newPhoneNumber }\n    try {\n        validatePerson( newPerson, persons )\n        personsService\n          .create(newPerson)\n          .then(createdPerson => {\n            setPersons( persons.concat( newPerson ) )\n            setNewName( '' )\n            setNewPhoneNumber( 0 )\n          })\n          .then(() => {\n            setNotification(`Added ${newPerson.name}`)\n            setTimeout(() => {setNotification(null)}, 5000)\n          })\n          .catch(error => {\n            const errMsg = error.response.data.error\n            setNotification(`${errMsg}`)\n            console.log(errMsg)\n            setTimeout(() => {setNotification(null)}, 5000)\n          })\n    } catch (error) {\n        if( error.phoneBookException ) { // is a custom exception made in this project\n            alert( error.userText )\n        } else { // is an internal exception\n            throw error\n        }\n    }\n  }\n\n  const changePhoneNumber = event => setNewPhoneNumber(event.target.value)\n  const changeName = event => setNewName(event.target.value)\n\n  const filterPersons = (event) => {\n    let newFilter = event.target.value \n    filterSetter( newFilter )\n    if( newFilter ){\n        let newFilteredPersons = filteredPersons.filter( \n            person => person\n                .name\n                .toLowerCase()\n                .startsWith( newFilter.toLowerCase() )\n        )\n      SetFilteredPersons( newFilteredPersons )\n    } else {\n      SetFilteredPersons( persons )\n    }\n  }\n  \n  const deletePerson = (person) => {\n    return () => {\n      let okToDelete = window.confirm(`Delete ${person.name} ?`) \n      if(okToDelete){\n        personsService\n        .exterminate(person.id)\n        .then(getAllPersons)\n        .catch(error => {\n          console.log(`can not delete: ${error}`)\n          alert('You have already deleted that person')\n        })\n      }\n    }\n  }\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification message={notification} />\n      <SearchFilter \n        filter={filter}\n        filterHandler={filterPersons}\n      />\n      <AddNew \n        addPersonHandler={addPerson}\n        name={newName}\n        nameChangeHandler={changeName}\n        numberChangeHandler={changePhoneNumber}\n        phoneNumber={newPhoneNumber}\n      />\n      <ListAll \n        persons={Boolean(filter) ? filteredPersons : persons} \n        deleteHandler={deletePerson}  \n      />\n    </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './components/app'\n\nReactDOM.render( <App />,   document.getElementById('root') )"],"sourceRoot":""}