(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(13),c=t.n(o),u=t(2),l=function(e){var n=e.name,t=e.phoneNumber,a=e.nameChangeHandler,o=e.numberChangeHandler,c=e.addPersonHandler;return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("div",null,r.a.createElement("h2",null,"add a new"),"name: ",r.a.createElement("input",{value:n,onChange:a}),r.a.createElement("br",null),"number: ",r.a.createElement("input",{value:t,onChange:o})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",onClick:c},"add"))))},i=function(e){var n=e.persons,t=e.deleteHandler;return r.a.createElement("div",null,r.a.createElement("h2",null,"Numbers"),r.a.createElement("ul",null,n.map((function(e){return r.a.createElement("li",{key:e.id+e.name+e.number},e.name," ",e.number,r.a.createElement("button",{onClick:t(e)},"delete"))}))))},m=function(e){var n=e.filter,t=e.filterHandler;return r.a.createElement("div",null,"filter shown with",r.a.createElement("input",{value:n,onChange:t}))},s=t(3),f=t.n(s),d="/api/persons",h=function(e){return e.then((function(e){return e.data}))},b=function(){return h(f.a.get(d))},p=function(e){return h(f.a.post(d,e))},E=function(e){return h(f.a.delete("".concat(d,"/").concat(e)))},v=function(e){var n=e.message;return n?r.a.createElement("div",{className:"notification"},n):null},g=(t(36),function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(""),s=Object(u.a)(c,2),f=s[0],d=s[1],h=Object(a.useState)(0),g=Object(u.a)(h,2),w=g[0],j=g[1],k=Object(a.useState)(t),O=Object(u.a)(k,2),C=O[0],H=O[1],x=Object(a.useState)(""),N=Object(u.a)(x,2),y=N[0],B=N[1],S=Object(a.useState)(""),T=Object(u.a)(S,2),P=T[0],D=T[1],J=function(){b().then((function(e){o(e),H(e)}))};Object(a.useEffect)(J,[]);return r.a.createElement("div",null,r.a.createElement("h1",null,"Phonebook"),r.a.createElement(v,{message:P}),r.a.createElement(m,{filter:y,filterHandler:function(e){var n=e.target.value;if(B(n),n){var a=C.filter((function(e){return e.name.toLowerCase().startsWith(n.toLowerCase())}));H(a)}else H(t)}}),r.a.createElement(l,{addPersonHandler:function(e){e.preventDefault();var n={name:f,number:w};try{!function(e,n){if(!e.name||isNaN(!e.number))throw{phoneBookException:!0,userText:"None of the fields can be empty!"};var t=n.some((function(n){return n.name===e.name})),a=n.some((function(n){return n.number===e.number}));if(t)throw{phoneBookException:!0,userText:"".concat(e.name," is already in phone book")};if(a){var r=n.reduce((function(n,t){return t.number===e.number?t.name:n}),"");throw{phoneBookException:!0,userText:"Number ".concat(e.number," belongs to ").concat(r)}}}(n,t),p(n).then((function(e){o(t.concat(n)),d(""),j(0)})).then((function(){D("Added ".concat(n.name)),setTimeout((function(){D(null)}),5e3)})).catch((function(e){console.log("there was an error when creating person: ".concat(e))}))}catch(a){if(!a.phoneBookException)throw a;alert(a.userText)}},name:f,nameChangeHandler:function(e){return d(e.target.value)},numberChangeHandler:function(e){return j(e.target.value)},phoneNumber:w}),r.a.createElement(i,{persons:Boolean(y)?C:t,deleteHandler:function(e){return function(){window.confirm("Delete ".concat(e.name," ?"))&&E(e.id).then(J).catch((function(e){console.log("can not delete: ".concat(e)),alert("You have already deleted that person")}))}}}))});c.a.render(r.a.createElement(g,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.69e50ba7.chunk.js.map